#+title: Server App
#+author: Camilo Correa Restrepo
#+author: Hiba Hnaini

This is the code for the server that runs the semantic translator for VariaMos.

#+begin_src python :session sr :tangle yes
#!/usr/bin/env python3

"""
VariaMos semantic translator server.

By: Camilo Correa Restrepo camilo.correa-restrepo@univ-paris1.fr
By: Hiba Hnaini _@_.fr
"""

from flask import Flask, request, jsonify
from main import run

app = Flask(__name__)


@app.route("/translate/<language>", methods=['POST'])
def translate(language):
    """Handle a translation request for a given <language>."""
    content = request.json
    print(content["model"])
    print(content["rules"])
    return jsonify({"sln": str(run(
        model=content["model"],
        rules=content["rules"],
        language=language
    ))})

#+end_src
